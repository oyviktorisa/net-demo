<div [@routerTransition]>
    <h4 class="text-center mb-3">{{ "Weather Checker"}}</h4>
    <form #weatherForm="ngForm" novalidate (ngSubmit)="check()">
        <div class="row">
            <div class="col-lg-4">
                <label>Country:</label>
                <select required name="Country"
                        #refCountry="ngModel"
                        class="form-control" [(ngModel)]="selectedCountry"
                        (change)='onCountrySelected()'>
                    <option value="undefined">Please select Value</option>
                    <option *ngFor="let country of countries"
                            [ngValue]="country.name">
                        {{country.name}}
                    </option>
                </select>
                <br />
                <div *ngIf="!refCountry.valid  && (refCountry.dirty || refCountry.touched)"
                     class="alert alert-danger">
                    <div [hidden]="!refCountry.errors.required">
                        Name is required
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <label>City:</label>
                <select required name="City"
                        #refCity="ngModel"
                        class="form-control" [(ngModel)]="selectedCity">
                    <option value="undefined">Please select Value</option>
                    <option *ngFor="let city of cities"
                            [ngValue]="city.name">
                        {{city.name}}
                    </option>
                </select>
                <br />
                <div *ngIf="!refCity.valid  && (refCity.dirty || refCity.touched)"
                     class="alert alert-danger">
                    <div [hidden]="!refCity.errors.required">
                        Name is required
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4">
                <label>Selected Country : {{refCountry.value}}</label>
                <p></p>
                <label>Selected City : {{refCity.value}}</label>
                <p></p>
                <pre>{{weather | json}}</pre>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4">
                <button type="submit" class="btn btn-default"
                        [disabled]="!weatherForm.form.valid">
                    Check
                </button>
            </div>
        </div>
    </form>
</div>
